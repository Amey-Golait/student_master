{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-07-17 12:11:39.112131",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Student",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- Container -->\n<div style=\"font-family: 'Segoe UI', sans-serif; color: #2c3e50; font-size: 14px; padding: 20px;\">\n\n  <!-- Header -->\n  <div style=\"text-align: center; border-bottom: 3px solid #34495e; padding-bottom: 10px; margin-bottom: 25px;\">\n    <h1 style=\"margin: 0; font-size: 26px; color: #2c3e50;\">4D Classes</h1>\n    <p style=\"font-size: 13px; color: #7f8c8d;\">Empowering students for a better tomorrow</p>\n  </div>\n\n  <!-- Student Info Card -->\n  <div style=\"background: #f4f6f7; padding: 15px 20px; border-radius: 8px; margin-bottom: 25px;\">\n    <table style=\"width: 100%;\">\n      <tr>\n        <td><strong>Student:</strong> {{ doc.full_name }} (ID: {{ doc.student_id }})</td>\n        <td><strong>Date:</strong> {{ frappe.utils.nowdate() }}</td>\n      </tr>\n      {% set enrollment = frappe.get_all(\"Class Enrollment\",\n          filters={\"student\": doc.name, \"docstatus\": [\"<\", 2]},\n          fields=[\"class_link\", \"academic_year\"],\n          order_by=\"creation desc\",\n          limit=1\n        ) %}\n        \n        {% if enrollment %}\n          {% set class_doc = frappe.get_doc(\"Class\", enrollment[0].class_link) %}\n          <tr>\n            <td><strong>Class:</strong> {{ class_doc.class_name }}</td>\n            <td><strong>Academic Year:</strong> {{ enrollment[0].academic_year }}</td>\n          </tr>\n        {% else %}\n          <tr>\n            <td><strong>Class:</strong> N/A</td>\n            <td><strong>Academic Year:</strong> N/A</td>\n          </tr>\n        {% endif %}\n    </table>\n  </div>\n\n  {% set results = {} %}\n  {% set gt = namespace(score=0, outof=0) %}\n\n  {% set exams = frappe.get_all(\"Exam\",\n    fields=[\"name\", \"exam_name\", \"subject\", \"total_marks\"],\n    order_by=\"subject, exam_name\"\n  ) %}\n\n  {% for exam in exams %}\n    {% set res = frappe.get_all(\"Student Exam Result\",\n      filters={\"parent\": exam.name, \"student\": doc.name},\n      fields=[\"marks_obtained\", \"status\"]\n    ) %}\n    {% if res %}\n      {% set r = res[0] %}\n      {% set subject = exam.subject %}\n      {% if subject not in results %}\n        {% set _ = results.update({subject: []}) %}\n      {% endif %}\n      {% set _ = results[subject].append({\n        \"exam_name\": exam.exam_name,\n        \"marks\": r.marks_obtained if r.status != \"Absent\" else \"-\",\n        \"total\": exam.total_marks,\n        \"status\": r.status\n      }) %}\n    {% endif %}\n  {% endfor %}\n\n  {% for subject, exams in results.items() %}\n    <!-- Subject Box -->\n    <div style=\"border: 1px solid #ddd; border-radius: 6px; margin-bottom: 20px;\">\n      <div style=\"background: #2980b9; color: white; padding: 10px 15px; border-top-left-radius: 6px; border-top-right-radius: 6px;\">\n        <strong>{{ subject }}</strong>\n      </div>\n\n      <table style=\"width: 100%; border-collapse: collapse;\">\n        <thead>\n          <tr style=\"background: #ecf0f1;\">\n            <th style=\"padding: 8px; border: 1px solid #ccc;\">Exam</th>\n            <th style=\"padding: 8px; border: 1px solid #ccc;\">Marks Obtained</th>\n            <th style=\"padding: 8px; border: 1px solid #ccc;\">Total Marks</th>\n            <th style=\"padding: 8px; border: 1px solid #ccc;\">Status</th>\n          </tr>\n        </thead>\n        <tbody>\n          {% set subj = namespace(score=0, outof=0) %}\n          {% for row in exams %}\n            <tr>\n              <td style=\"padding: 8px; border: 1px solid #eee;\">{{ row.exam_name }}</td>\n              <td style=\"padding: 8px; border: 1px solid #eee;\">{{ row.marks }}</td>\n              <td style=\"padding: 8px; border: 1px solid #eee;\">{{ row.total }}</td>\n              <td style=\"padding: 8px; border: 1px solid #eee;\">{{ row.status }}</td>\n            </tr>\n            {% if row.status != \"Absent\" %}\n              {% set subj.score = subj.score + (row.marks | int) %}\n              {% set subj.outof = subj.outof + (row.total | int) %}\n              {% set gt.score = gt.score + (row.marks | int) %}\n              {% set gt.outof = gt.outof + (row.total | int) %}\n            {% endif %}\n          {% endfor %}\n          <tr style=\"font-weight: bold; background: #f8f9f9;\">\n            <td style=\"padding: 8px; border: 1px solid #ddd;\">Total</td>\n            <td style=\"padding: 8px; border: 1px solid #ddd;\">{{ subj.score }}</td>\n            <td style=\"padding: 8px; border: 1px solid #ddd;\">{{ subj.outof }}</td>\n            <td style=\"padding: 8px; border: 1px solid #ddd;\"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  {% endfor %}\n\n  <!-- Final Summary -->\n  <div style=\"background: #27ae60; color: white; padding: 16px; text-align: center; font-size: 18px; border-radius: 6px; margin-top: 30px;\">\n    <strong>Grand Total:</strong> {{ gt.score }} / {{ gt.outof }} |\n    <strong>Percentage:</strong> {{ (gt.score / gt.outof * 100) | round(2) if gt.outof else 0 }}%\n  </div>\n\n  <!-- Signature Row -->\n  <div style=\"margin-top: 60px;\">\n    <table style=\"width: 100%; font-size: 14px;\">\n      <tr>\n        <td><strong>Student Signature:</strong> ____________________</td>\n        <td style=\"text-align: center;\"><strong>Parent Signature:</strong> ____________________</td>\n        <td style=\"text-align: right;\"><strong>Principal:</strong> ____________________</td>\n      </tr>\n    </table>\n  </div>\n</div>\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-07-17 16:02:07.275011",
 "modified_by": "Administrator",
 "module": "student_master",
 "name": "Annual Student Report Card",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}